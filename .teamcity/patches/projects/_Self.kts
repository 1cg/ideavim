package patches.projects

import jetbrains.buildServer.configs.kotlin.v2019_2.*
import jetbrains.buildServer.configs.kotlin.v2019_2.Project
import jetbrains.buildServer.configs.kotlin.v2019_2.ProjectFeature
import jetbrains.buildServer.configs.kotlin.v2019_2.ui.*

/*
This patch script was generated by TeamCity on settings change in UI.
To apply the patch, change the root project
accordingly, and delete the patch script.
*/
changeProject(DslContext.projectId) {
    features {
        val feature1 = find<ProjectFeature> {
            feature {
                type = "CloudImage"
                id = "PROJECT_EXT_768"
                param("agent_pool_id", "41")
                param("amazon-id", "ami-0d1a6a32faa92923e")
                param("ebs-optimized", "false")
                param("image-instances-limit", "")
                param("image-name-prefix", "BuildAgentsIdeaVim")
                param("instance-type", "c5d.large")
                param("key-pair-name", "teamcity-prod-pub")
                param("profileId", "amazon-48")
                param("security-group-ids", "sg-eda08696,sg-7332cf0f,")
                param("source-id", "BuildAgentsIdeaVim")
                param("spot-instance-price", "0.1")
                param("subnet-id", "subnet-58839511")
                param("use-spot-instances", "true")
                param("user-tags", "project=idea-vim")
            }
        }
        feature1.apply {
            param("instance-type", "c5d.xlarge")
            param("spot-instance-price", "0.12")
        }
        val feature2 = find<ProjectFeature> {
            feature {
                type = "CloudProfile"
                id = "amazon-48"
                param("agentPushPreset", "")
                param("cloud-code", "amazon")
                param("description", "")
                param("enabled", "true")
                param("max-running-instances", "10")
                param("name", "Cloud Agents")
                param("next-hour", "")
                param("not-checked", "")
                param("profileId", "amazon-48")
                param("profileServerUrl", "")
                param("region", "eu-west-1")
                param("secure:access-id", "credentialsJSON:dbcdb2a2-de5f-4bc9-9421-292b19e83947")
                param("secure:secret-key", "credentialsJSON:65a87fe7-0977-4af9-96f1-344f2b82d269")
                param("system.cloud.profile_id", "amazon-48")
                param("terminate-idle-time", "15")
                param("total-work-time", "")
            }
        }
        feature2.apply {
        }
    }
}
